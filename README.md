# mpa+srr构建多页应用脚手架
node部分：
koa2改造后台管理系统
使用roll-up对config配置进行tree-shaking
包含404，500错误处理，日志，向php后台api接口发送请求

前端页面部分：
为什么用模版引擎？
模板最本质的作用是【变静为动】一切利用这方面的都是优势，不利于的都是劣势。要很好地实现【变静为动】的目的，有这么几点：
    1. 可维护性（后期改起来方便）；
    2. 可扩展性（想要增加功能，增加需求方便）；
    3. 开发效率提高（程序逻辑组织更好，调试方便）；
    4. 看起来舒服（不容易写错）；

1、使用swig模版引擎来组装页面
2、pages负责组装页面组件
3、components里是组件
4、设置各页面入口文件，用webpack去编译，将各页面打包出来的js自己写插件插入每个页面，构成mpa应用

如何做落地ssr，切页spa？
1、使用pjax，原理：为页面指定节点（用class类），落地页和刷新页面时不会带x-pjax请求头，切页时会带x-pjax请求头，检测到带有x-pjax的请求头，则直接替换节点包裹的html。
2、这样有个缺点，因为是多页应用，每个页面都有自己的js，若只替换html则页面的js无法在页面中加载，则只能做服务端渲染出来的展示页面，没有js就无法去做更多的交互。
3、所以一种方法是可以控制webpack的插入方式，动态的插入每一个页面所需要的js和css。
第二种方法是可以用quicklink去预获取js。

如何用quick-link预加载js
解决方法：使用quick-link
作用：可以将页面中所有的a标签中的地址使用link标签包裹，prefetch去预获取其它页面的js，并存入本地硬盘
注意：
1、只会预获取视窗内的js资源
2、可以自己指定去获取哪些资源
